go: &go
  image: golang
  working_dir: /go/src/github.com/mattes/migrate
  volumes:
    - .:/go/src/github.com/mattes/migrate
go-test:
  <<: *go
  command: sh -c 'go get -t -v ./... && go test -v ./...'
  links:
    - postgres
    - mysql
    - cassandra
go-build:
  <<: *go
  command: sh -c 'go get -v && go build -ldflags ''-s'' -o migrater'
  environment:
    CGO_ENABLED: 0
postgres:
  image: postgres
mysql:
  image: mysql
  environment:
    MYSQL_DATABASE: migratetest
    MYSQL_ALLOW_EMPTY_PASSWORD: yes
cassandra:
  image: cassandra
